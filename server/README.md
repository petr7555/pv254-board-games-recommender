# Board games recommender server

The server is deployed
at [https://pv254-board-games-recommender-server.onrender.com](https://pv254-board-games-recommender-server.onrender.com).

## How to run:

- Download [data](https://www.kaggle.com/datasets/threnjen/board-games-database-from-boardgamegeek) and unzip it
  to `data` folder.
- Install dependencies: `poetry install`.
- Run `playground/jakub_kraus/preprocessing.ipynb`. This will create `data/cleaned/` folder with preprocessed data.
- Run `poetry run create-similarity-matrix`. This will create `app/db/similarity_matrix.npy` and
  `app/db/map_from_bgg_id_to_index.json`.
- Run server: `uvicorn app.main:app --reload`.

## Info

- Analysis info and figures in the project `README.md` have been created by
  running `playground/jakub_kraus/exploration_phase.ipynb`.
- `app/db/gamesById.json`, `app/db/gamesOrderedByName.json`, `app/db/gamesOrderedByNumberOfRatings.json`
  and `app/db/gamesOrderedByRank.json` have been generated by running `playground/petr_janik/baselines.ipynb`.
- `app/db/similarity_matrix.npy` and `app/db/map_from_bgg_id_to_index.json` are automatically generated during the
  Docker image build.
- `app/db/items_factors.pkl` has been generated by running `app/algorithms/latent_factors/create_items_factors.py`.

## Useful Poetry commands:

- Install all dependencies: `poetry install`.
- Add new package at the latest version: `poetry add <package>`, e.g. `poetry add numpy`.
- Add package only for development: `poetry add <package> --group dev`, e.g. `poetry add jupyter --group dev`.
- Regenerate `poetry.lock` file: `poetry lock --no-update`.
- Remove package: `poetry remove <package>`, e.g. `poetry remove numpy`.

## Lint autoformat

- `poetry run black --config black.py.toml .`

## Lint check

- `poetry run black --config black.py.toml . --check`
